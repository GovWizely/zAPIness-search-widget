# zAPIness-search-widget

A search widget that allows users to search a given zAPIness endpoint.

<img width="722" alt="screen shot 2017-04-18 at 3 31 37 pm" src="https://cloud.githubusercontent.com/assets/21019282/25119298/2bbd6b3e-244c-11e7-874b-310ddff36431.png">
____


### Basic Usage

[Live Demo](http://zapi-widget.herokuapp.com/)

zAPIness-search-widget will be loaded in any webpage by embedding the following javascripts into the page:

```javascript
<script type="text/javascript">
  var script = document.createElement('script');
  script.src = "https://govwizely.github.io/zAPIness-search-widget/static/js/main.7285011e.js";
  document.getElementsByTagName('head')[0].appendChild(script);

  window.onload = function() {
    // Initiate the search widget with endpoint
    zAPI.SearchWidget.new({
      mountPoint: "#root",
      host: "http://rrsoft3.apib.tech",
      endpoint: "sample_api",
      label: "agency",
      fields: [
        "agency",
        "description"
      ]
    });
  }
</script>
```

---

### Configurations

* __mountPoint__: Selector of the div to embed on the page. The app will create the div with the mountPoint if none is found on the page
* __host__: Host of your endpoint from zAPIness app
* __endpoint__: Name of your endpoint
* __label__: The main title you want to show in the search result, i.e Department of Immigration and Citizenship in the screenshot above. Default to first element in the aggregations
* __fields__: By default, it will show all searchable fields from the endpoint. You may set the fields you want to show in the search result. The fields will be combinded with all the searchable fields.
* __preview__: Default to false. If true, perform a search with ```q=''``` on first load and show all the details of the first result.

---

### Features

* __Search with Keyword__: Perform search when users type
* __Additional Filters__: Allow user to add filterings on the search
* __Customization fields to be shown in the search results__
* __Basic Pagination__

___

### Development Setup

```
git clone [repo]
npm install
npm start
```

To setup endpoint, refer to https://github.com/GovWizely/zAPIness for instructions.
___

### Development Notes

* Get JS minified file:```npm run build```
* Run test: ```npm run test```
* Run tests without cache: ```npm run test --no-cache```
* Run ESLint: ```npm run lint```
* Deploy to GH Page(optional): ```npm run deploy```

___

### Troubleshooting

__Search Widget is not interacting with endpoint__

Currently, zAPIness-search-widget can only interact with zAPIness endpoint on http. Make sure you access your webpage on http instead of https

__Snapshot Tests fails__

Snapshot Test aims to capture the latest html generated by the component. If the component is changed, it is expected that the snapshot file should be updated as well. To update the snapshot, run ```npm install jest-cli -g``` and ```jest --updateSnapshot```
